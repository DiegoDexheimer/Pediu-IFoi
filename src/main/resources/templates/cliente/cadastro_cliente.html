<!DOCTYPE html>
<html lang="pt-br">
<head>
	 <meta charset="utf-8" />
	 <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	 <title>Cadastro de Cliente | Pediu-IFoi</title>
	 <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
	 <link href="https://fonts.googleapis.com" rel="preconnect" />
	 <link crossorigin href="https://fonts.gstatic.com" rel="preconnect" />
	 <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet" />
	<script id="tailwind-config">tailwind.config = {darkMode: "class", theme: {extend: {colors: {primary: "#019863", "background-light": "#f5f8f7", "background-dark": "#0f231c"}, fontFamily: {display: ["Be Vietnam Pro"]}, borderRadius: {DEFAULT: "0.25rem", lg: "0.5rem", xl: "0.75rem", full: "9999px"}}}};</script>
</head>
<body class="bg-background-light dark:bg-background-dark font-display">
<div class="flex items-center justify-center min-h-screen">
	 <div class="w-full max-w-md p-8 space-y-6 bg-white dark:bg-background-dark rounded-xl shadow-2xl">
		  <div class="text-center">
				<h1 class="text-3xl font-bold text-gray-900 dark:text-white">Crie sua conta</h1>
				<p class="mt-2 text-sm text-gray-600 dark:text-gray-300">Preencha os campos abaixo para se cadastrar</p>
		  </div>
		  <div th:if="${errors}" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative">
				<strong>Dados inválidos:</strong>
				<ul class="list-disc ml-5">
					 <li th:each="err : ${errors}" th:text="${err.defaultMessage}"></li>
				</ul>
		  </div>
		  <form action="/cliente/cadastro_cliente" method="post" id="cadastroForm" class="space-y-4" novalidate>
				<div>
					<label class="text-sm font-medium text-gray-700 dark:text-gray-200" for="nome">Nome</label>
					<input class="w-full px-4 py-2 mt-1 text-gray-900 bg-gray-100 border border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-colors duration-300" id="nome" name="nome" required minlength="3" th:value="${cliente?.nome}" type="text" autocomplete="off" />
					<div id="nomeHelp" class="text-xs text-red-600 mt-1 hidden">O nome deve conter pelo menos 3 letras e não pode ter caracteres especiais.</div>
				</div>
				<div>
					<label class="text-sm font-medium text-gray-700 dark:text-gray-200" for="login">Login</label>
					<input class="w-full px-4 py-2 mt-1 text-gray-900 bg-gray-100 border border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-colors duration-300" id="login" name="login" required minlength="5" th:value="${cliente?.login}" type="text" autocomplete="off" />
					<div id="loginHelp" class="text-xs text-red-600 mt-1 hidden">O login deve conter pelo menos 5 letras e não pode ter caracteres especiais.</div>
				</div>
				<div>
					 <label class="text-sm font-medium text-gray-700 dark:text-gray-200" for="senha">Senha</label>
					 <input class="w-full px-4 py-2 mt-1 text-gray-900 bg-gray-100 border border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-colors duration-300" id="senha" name="senha" required minlength="5" type="password" />
				</div>
				<div>
					 <label class="text-sm font-medium text-gray-700 dark:text-gray-200" for="telefone">Telefone</label>
					 <input class="w-full px-4 py-2 mt-1 text-gray-900 bg-gray-100 border border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-colors duration-300" id="telefone" name="telefone" required maxlength="11" th:value="${cliente?.telefone}" pattern="[0-9()\- ]" title="Digite exatamente 11 dígitos, apenas números e caracteres válidos do formato." oninput="this.value = this.value.replace(/[^0-9()\- ]/g, '')" type="tel" />
					 <div id="telefoneHelp" class="text-xs text-red-600 mt-1 hidden">O telefone deve conter exatamente 11 dígitos numéricos.</div>
				</div>
				<div>
					 <button class="w-full px-4 py-3 mt-4 text-lg font-bold text-white bg-primary rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/50 dark:focus:ring-offset-background-dark transition-colors duration-300" type="submit" id="btnCadastrar" disabled>
						  Finalizar Cadastro
					 </button>
				</div>
		  </form>
		  <script>
				const form = document.getElementById('cadastroForm');
				const btnCadastrar = document.getElementById('btnCadastrar');
				const telefoneInput = document.getElementById('telefone');
				const telefoneHelp = document.getElementById('telefoneHelp');
				const nomeInput = document.getElementById('nome');
				const nomeHelp = document.getElementById('nomeHelp');
				const loginInput = document.getElementById('login');
				const loginHelp = document.getElementById('loginHelp');

				function validarCampos() {
					nomeInput.value = nomeInput.value.replace(/[^a-zA-ZÀ-ÿ\s]/g, '');
					loginInput.value = loginInput.value.replace(/[^a-zA-Z0-9]/g, '');

					const login = loginInput.value.trim();
					const senha = document.getElementById('senha').value.trim();
					const nome = nomeInput.value.trim();
					const telefone = telefoneInput.value.trim();
					const telefoneNumeros = telefone.replace(/[^0-9]/g, '');

					const nomeValido = nome.length >= 3;
					const loginValido = login.length >= 5;
					const senhaValida = senha.length >= 5;
					const telefoneValido = telefoneNumeros.length === 11;

					if (!nomeValido && nome.length > 0) {
						nomeInput.classList.add('border-red-500');
						nomeHelp.classList.remove('hidden');
					} else {
						nomeInput.classList.remove('border-red-500');
						nomeHelp.classList.add('hidden');
					}

					if (!loginValido && login.length > 0) {
						loginInput.classList.add('border-red-500');
						loginHelp.classList.remove('hidden');
					} else {
						loginInput.classList.remove('border-red-500');
						loginHelp.classList.add('hidden');
					}

					if (!telefoneValido && telefone.length > 0) {
						telefoneInput.classList.add('border-red-500');
						telefoneHelp.classList.remove('hidden');
					} else {
						telefoneInput.classList.remove('border-red-500');
						telefoneHelp.classList.add('hidden');
					}

					btnCadastrar.disabled = !(loginValido && senhaValida && nomeValido && telefoneValido);
				}

				form.addEventListener('input', validarCampos);
				window.addEventListener('DOMContentLoaded', validarCampos);
		  </script>
	 </div>
</div>
</body>
</html>
